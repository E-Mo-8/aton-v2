{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Balora/Projects/aton-v2/client/context/WalletContext.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useState, useEffect } from \"react\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport const WalletContext = createContext<any>(null);\r\n\r\nexport const WalletProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [currentAccount, setCurrentAccount] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  // Hardcode the admin address (the one you deployed with)\r\n  const ADMIN_ADDRESS = process.env.NEXT_PUBLIC_ADMIN_ADDRESS || \"\";\r\n\r\n  const connectWallet = async () => {\r\n    if (!window.ethereum) return alert(\"Please install MetaMask\");\r\n    const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\r\n    setCurrentAccount(accounts[0]);\r\n    checkAdmin(accounts[0]);\r\n  };\r\n\r\n  const checkWallet = async () => {\r\n    if (!window.ethereum) return;\r\n    const accounts = await window.ethereum.request({ method: \"eth_accounts\" });\r\n    if (accounts.length) {\r\n      setCurrentAccount(accounts[0]);\r\n      checkAdmin(accounts[0]);\r\n    }\r\n  };\r\n\r\nconst checkAdmin = (address: string) => {\r\n    const envAdmin = process.env.NEXT_PUBLIC_ADMIN_ADDRESS;\r\n    \r\n    console.log(\"--- DEBUG ADMIN CHECK ---\");\r\n    console.log(\"1. Connected Wallet:\", address);\r\n    console.log(\"2. Env Var Address :\", envAdmin);\r\n    \r\n    if (!envAdmin) {\r\n        console.error(\"ERROR: .env variable is missing or empty!\");\r\n        return;\r\n    }\r\n\r\n    // Clean strings to ensure no hidden spaces match\r\n    const cleanAddress = address.trim().toLowerCase();\r\n    const cleanEnvAdmin = envAdmin.trim().toLowerCase();\r\n\r\n    if(cleanAddress === cleanEnvAdmin) {\r\n        console.log(\"✅ SUCCESS: Addresses Match. Setting Admin to TRUE.\");\r\n        setIsAdmin(true);\r\n    } else {\r\n        console.log(\"❌ FAIL: Addresses do not match.\");\r\n        setIsAdmin(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkWallet();\r\n  }, []);\r\n\r\n  return (\r\n    <WalletContext.Provider value={{ currentAccount, connectWallet, isAdmin }}>\r\n      {children}\r\n    </WalletContext.Provider>\r\n  );\r\n};"],"names":[],"mappings":";;;;;;;AACA;AADA;;;AAIO,MAAM,8BAAgB,IAAA,gOAAa,EAAM;AAEzC,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAiC;IACxE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,2NAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2NAAQ,EAAC;IAEvC,yDAAyD;IACzD,MAAM,gBAAgB,kFAAyC;IAE/D,MAAM,gBAAgB;QACpB,IAAI,CAAC,OAAO,QAAQ,EAAE,OAAO,MAAM;QACnC,MAAM,WAAW,MAAM,OAAO,QAAQ,CAAC,OAAO,CAAC;YAAE,QAAQ;QAAsB;QAC/E,kBAAkB,QAAQ,CAAC,EAAE;QAC7B,WAAW,QAAQ,CAAC,EAAE;IACxB;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,OAAO,QAAQ,EAAE;QACtB,MAAM,WAAW,MAAM,OAAO,QAAQ,CAAC,OAAO,CAAC;YAAE,QAAQ;QAAe;QACxE,IAAI,SAAS,MAAM,EAAE;YACnB,kBAAkB,QAAQ,CAAC,EAAE;YAC7B,WAAW,QAAQ,CAAC,EAAE;QACxB;IACF;IAEF,MAAM,aAAa,CAAC;QAChB,MAAM;QAEN,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,wBAAwB;QACpC,QAAQ,GAAG,CAAC,wBAAwB;QAEpC;;QAKA,iDAAiD;QACjD,MAAM,eAAe,QAAQ,IAAI,GAAG,WAAW;QAC/C,MAAM,gBAAgB,SAAS,IAAI,GAAG,WAAW;QAEjD,IAAG,iBAAiB,eAAe;YAC/B,QAAQ,GAAG,CAAC;YACZ,WAAW;QACf,OAAO;YACH,QAAQ,GAAG,CAAC;YACZ,WAAW;QACf;IACF;IAEA,IAAA,4NAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,qBACE,wPAAC,cAAc,QAAQ;QAAC,OAAO;YAAE;YAAgB;YAAe;QAAQ;kBACrE;;;;;;AAGP"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/Balora/Projects/aton-v2/client/app/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { useContext } from \"react\";\r\nimport { WalletContext } from \"@/context/WalletContext\";\r\n\r\nexport default function Navbar() {\r\n  const { currentAccount, connectWallet, isAdmin } = useContext(WalletContext);\r\n\r\n  return (\r\n    <nav className=\"flex justify-between items-center p-6 bg-slate-800 border-b border-slate-700\">\r\n      <Link href=\"/\" className=\"text-2xl font-bold text-blue-400\">Aton Market</Link>\r\n      <div className=\"flex gap-6\">\r\n                {isAdmin && (\r\n          <div className=\"flex gap-4 bg-slate-700 px-4 py-1 rounded-full\">\r\n            <span className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1\">Admin:</span>\r\n            <Link href=\"/admin\" className=\"hover:text-white text-blue-200\">List New</Link>\r\n            <Link href=\"/admin/assignments\" className=\"hover:text-white text-blue-200\">View Assignments</Link>\r\n          </div>\r\n        )}\r\n        {currentAccount && <div className=\"flex gap-4 bg-slate-700 px-4 py-1 rounded-full\"><Link className=\"text-blue-200\" href=\"/dashboard\">My Items</Link></div>}\r\n        <div className=\"flex gap-4 bg-slate-700 px-4 py-1 rounded-full\"><Link className=\"text-blue-200\" href=\"/market\">Public Market</Link></div>\r\n      </div>\r\n      <button \r\n        onClick={connectWallet}\r\n        className=\"bg-blue-600 00 px-4 py-2 rounded hover:bg-blue-700 transition cursor-pointer\"\r\n      >\r\n        {currentAccount ? `${currentAccount.slice(0, 6)}...${currentAccount.slice(-4)}` : \"Connect Wallet\"}\r\n      </button>\r\n    </nav>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,EAAE,cAAc,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,IAAA,6NAAU,EAAC,oJAAa;IAE3E,qBACE,wPAAC;QAAI,WAAU;;0BACb,wPAAC,iLAAI;gBAAC,MAAK;gBAAI,WAAU;0BAAmC;;;;;;0BAC5D,wPAAC;gBAAI,WAAU;;oBACJ,yBACP,wPAAC;wBAAI,WAAU;;0CACb,wPAAC;gCAAK,WAAU;0CAAiE;;;;;;0CACjF,wPAAC,iLAAI;gCAAC,MAAK;gCAAS,WAAU;0CAAiC;;;;;;0CAC/D,wPAAC,iLAAI;gCAAC,MAAK;gCAAqB,WAAU;0CAAiC;;;;;;;;;;;;oBAG9E,gCAAkB,wPAAC;wBAAI,WAAU;kCAAiD,cAAA,wPAAC,iLAAI;4BAAC,WAAU;4BAAgB,MAAK;sCAAa;;;;;;;;;;;kCACrI,wPAAC;wBAAI,WAAU;kCAAiD,cAAA,wPAAC,iLAAI;4BAAC,WAAU;4BAAgB,MAAK;sCAAU;;;;;;;;;;;;;;;;;0BAEjH,wPAAC;gBACC,SAAS;gBACT,WAAU;0BAET,iBAAiB,GAAG,eAAe,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,eAAe,KAAK,CAAC,CAAC,IAAI,GAAG;;;;;;;;;;;;AAI1F"}}]
}